{"ast":null,"code":"import _defineProperty from \"/Users/mirandamo/Documents/GitHub/cs1300-development-2020-sln/shopping-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/mirandamo/Documents/GitHub/cs1300-development-2020-sln/shopping-app/src/components/Shop.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport \"../css/Shop.css\";\nimport ProductGrid from \"./ProductGrid\";\nimport Cart from \"./Cart\";\nimport Header from \"./Header\";\n\nclass Shop extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onSelectFilterSize = event => {\n      this.setState({\n        size: event\n      });\n    };\n\n    this.onSelectFilterLight = event => {\n      this.setState({\n        light: event\n      });\n    };\n\n    this.matchesFilterSize = item => {\n      if (this.state.size === \"Size\") {\n        return true;\n      } else if (this.state.size === item.size) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.matchesFilterLight = item => {\n      if (this.state.light === \"Light\") {\n        return true;\n      } else if (this.state.light === item.light) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.filterItems = item => {\n      return this.matchesFilterSize(item) && this.matchesFilterLight(item);\n    };\n\n    this.sortLowToHigh = (a, b) => a.price > b.price ? 1 : -1;\n\n    this.sortHighToLow = (a, b) => a.price < b.price ? 1 : -1;\n\n    this.onPriceLowToHigh = () => {\n      this.setState({\n        sortPrice: this.sortLowToHigh\n      });\n    };\n\n    this.onPriceHighToLow = () => {\n      this.setState({\n        sortPrice: this.sortHighToLow\n      });\n    };\n\n    this.onPriceSelect = () => {\n      this.setState({\n        sortPrice: undefined\n      });\n    };\n\n    this.handleSortPriceTitle = () => {\n      let select = \"Select\";\n      let lowToHigh = \"Lowest to Highest\";\n      let highToLow = \"Highest to Lowest\";\n\n      if (this.state.sortPrice === undefined) {\n        this.setState({\n          priceTitle: select\n        });\n      }\n\n      if (this.state.sortPrice === this.sortLowToHigh) {\n        this.setState({\n          priceTitle: lowToHigh\n        });\n      }\n\n      if (this.state.sortPrice === this.sortHighToLow) {\n        this.setState({\n          priceTitle: highToLow\n        });\n      }\n    };\n\n    this.addToCart = item => {\n      if (this.state.cartContents.some(el => item.name === el.name)) {\n        let index = this.state.cartContents.findIndex(el => el.name === item.name);\n        let updatedContents = [...this.state.cartContents];\n        updatedContents[index] = _objectSpread({}, updatedContents[index], {\n          quantity: parseFloat(updatedContents[index].quantity) + parseFloat(item.quantity)\n        });\n        this.setState({\n          cartContents: updatedContents\n        });\n      } else {\n        this.setState(state => ({\n          cartContents: [...state.cartContents, item]\n        }));\n      }\n\n      {\n        console.log(\"newest cart\" + this.state.cartContents);\n      }\n      this.calcSubtotal();\n    };\n\n    this.removeFromCart = item => {\n      this.setState(state => ({\n        cartContents: state.cartContents.filter(el => el.name !== item.name)\n      }));\n    };\n\n    this.onDecrease = item => {\n      if (this.state.cartContents.some(el => item.name === el.name)) {\n        let index = this.state.cartContents.findIndex(el => el.name === item.name);\n        let updatedContents = [...this.state.cartContents];\n        updatedContents[index] = _objectSpread({}, updatedContents[index], {\n          quantity: parseFloat(updatedContents[index].quantity) - 1 + parseFloat(item.quantity)\n        });\n        this.setState({\n          cartContents: updatedContents\n        });\n      } else {\n        this.setState(state => ({\n          cartContents: [...state.cartContents, item]\n        }));\n      }\n    };\n\n    this.onIncrease = item => {\n      if (this.state.cartContents.some(el => item.name === el.name)) {\n        let index = this.state.cartContents.findIndex(el => el.name === item.name);\n        let updatedContents = [...this.state.cartContents];\n        updatedContents[index] = _objectSpread({}, updatedContents[index], {\n          quantity: parseFloat(updatedContents[index].quantity) + 1 + parseFloat(item.quantity)\n        }); // {console.log(updatedContents[index].quantity)}\n\n        this.setState({\n          cartContents: updatedContents\n        });\n      } else {\n        this.setState(state => ({\n          cartContents: [...state.cartContents, item]\n        }));\n      }\n    };\n\n    this.calcSubtotal = () => {\n      {\n        console.log(this.state.cartContents[0]);\n      }\n      let newTotal = 0;\n\n      for (let i = 0; i < this.state.cartContents.length; i++) {\n        newTotal = this.state.cartContents.reduce((prev, curr) => prev + curr[i].quantity * curr[i].price, 0);\n      }\n\n      {\n        console.log(\"TOTAL\" + newTotal);\n      }\n      this.setState({\n        oldTotal: newTotal\n      });\n    };\n\n    this.state = {\n      cartContents: [],\n      size: \"Size\",\n      light: \"Light\",\n      sortPrice: undefined,\n      priceTitle: \"Select\",\n      oldTotal: 0\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cards-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Header, {\n      onSelectFilterSize: this.onSelectFilterSize,\n      onSelectFilterLight: this.onSelectFilterLight,\n      onPriceLowToHigh: this.onPriceLowToHigh,\n      onPriceHighToLow: this.onPriceHighToLow,\n      onPriceSelect: this.onPriceSelect,\n      priceTitle: this.state.priceTitle,\n      handlePriceTitle: this.handleSortPriceTitle,\n      size: this.state.size,\n      light: this.state.light,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), this.props.list.filter(this.filterItems).length > 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(ProductGrid, {\n      list: this.props.list.filter(this.filterItems).sort(this.state.sortPrice),\n      isInCart: false,\n      onSubmit: this.addToCart,\n      onIncrease: this.onIncrease,\n      onDecrease: this.onDecrease,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"No results match the filters :(\"))), React.createElement(\"div\", {\n      className: \"cart-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Cart, {\n      contents: this.state.cartContents,\n      subtotal: this.state.oldTotal,\n      onSubmit: this.removeFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Shop;","map":{"version":3,"sources":["/Users/mirandamo/Documents/GitHub/cs1300-development-2020-sln/shopping-app/src/components/Shop.js"],"names":["React","ProductGrid","Cart","Header","Shop","Component","constructor","props","onSelectFilterSize","event","setState","size","onSelectFilterLight","light","matchesFilterSize","item","state","matchesFilterLight","filterItems","sortLowToHigh","a","b","price","sortHighToLow","onPriceLowToHigh","sortPrice","onPriceHighToLow","onPriceSelect","undefined","handleSortPriceTitle","select","lowToHigh","highToLow","priceTitle","addToCart","cartContents","some","el","name","index","findIndex","updatedContents","quantity","parseFloat","console","log","calcSubtotal","removeFromCart","filter","onDecrease","onIncrease","newTotal","i","length","reduce","prev","curr","oldTotal","render","list","sort"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../css/Shop.css\";\nimport ProductGrid from \"./ProductGrid\";\nimport Cart from \"./Cart\";\nimport Header from \"./Header\"\n\nclass Shop extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cartContents: [],\n      size: \"Size\",\n      light: \"Light\",\n      sortPrice: undefined,\n      priceTitle: \"Select\",\n      oldTotal: 0\n    };\n  }\n\n  onSelectFilterSize = event => {\n    this.setState({size:event})\n  };\n\n  onSelectFilterLight = event => {\n    this.setState({light:event})\n  };\n\n\n  matchesFilterSize = item => {\n    if (this.state.size === \"Size\"){\n      return true\n    } else if (this.state.size === item.size){\n      return true\n    } else {\n      return false\n    }\n  }\n\n  matchesFilterLight = item => {\n    if (this.state.light === \"Light\"){\n      return true\n    } else if (this.state.light === item.light){\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // checks if each item matches all the filters, returning true if it does\n  filterItems = item => {\n    return this.matchesFilterSize(item) && this.matchesFilterLight(item);\n  }\n\n  sortLowToHigh = (a,b) => (a.price > b.price)? 1 : -1\n  sortHighToLow = (a,b) => (a.price < b.price)? 1 : -1\n\n  onPriceLowToHigh = () => {\n    this.setState({sortPrice:this.sortLowToHigh});\n  }\n\n  onPriceHighToLow = () => {\n    this.setState({sortPrice:this.sortHighToLow});\n  }\n\n  onPriceSelect = () => {\n    this.setState({sortPrice:undefined});\n  }\n\n  handleSortPriceTitle = () => {\n    let select = \"Select\";\n    let lowToHigh = \"Lowest to Highest\";\n    let highToLow = \"Highest to Lowest\";\n    if (this.state.sortPrice === undefined) {\n      this.setState({priceTitle: select})\n    }\n    if (this.state.sortPrice === this.sortLowToHigh) {\n      this.setState({priceTitle: lowToHigh})\n    }\n    if (this.state.sortPrice === this.sortHighToLow) {\n      this.setState({priceTitle: highToLow})\n    }\n  }\n\n  addToCart = (item) => {\n    if (this.state.cartContents.some(el => item.name === el.name)) {\n      let index = this.state.cartContents.findIndex(el => el.name === item.name);\n      let updatedContents = [...this.state.cartContents];\n      updatedContents[index] = { ...updatedContents[index], quantity: parseFloat(updatedContents[index].quantity) + parseFloat(item.quantity) }\n      this.setState({ cartContents: updatedContents });\n    } else {\n      this.setState(state => ({\n        cartContents: [...state.cartContents, item]\n      }))\n    }\n    {console.log(\"newest cart\" + this.state.cartContents)}\n    this.calcSubtotal();\n  }\n\n  removeFromCart = (item) => {\n    this.setState(state => ({\n      cartContents: state.cartContents.filter(el => el.name !== item.name)\n    }))\n  }\n\n  onDecrease = (item) => {\n\n    if (this.state.cartContents.some(el => item.name === el.name)) {\n      let index = this.state.cartContents.findIndex(el => el.name === item.name);\n      let updatedContents = [...this.state.cartContents];\n      updatedContents[index] = { ...updatedContents[index], quantity: parseFloat(updatedContents[index].quantity) -1 + parseFloat(item.quantity) }\n      this.setState({ cartContents: updatedContents });\n    } else {\n      this.setState(state => ({\n        cartContents: [...state.cartContents, item]\n      }))\n    }\n  }\n\n  onIncrease = (item) => {\n    \n    if (this.state.cartContents.some(el => item.name === el.name)) {\n      let index = this.state.cartContents.findIndex(el => el.name === item.name);\n      let updatedContents = [...this.state.cartContents];\n      updatedContents[index] = { ...updatedContents[index], quantity: parseFloat(updatedContents[index].quantity) +1 + parseFloat(item.quantity) }\n      // {console.log(updatedContents[index].quantity)}\n      this.setState({ cartContents: updatedContents });\n    } else {\n      this.setState(state => ({\n        cartContents: [...state.cartContents, item]\n      }))\n    }\n  }\n\n  \n  calcSubtotal = () => {\n    {console.log(this.state.cartContents[0])}\n    let newTotal = 0;\n    for (let i=0; i<this.state.cartContents.length; i++) {\n      newTotal = this.state.cartContents.reduce((prev, curr) => prev + (curr[i].quantity*curr[i].price), 0);\n    }\n    {console.log(\"TOTAL\" + newTotal)}\n    this.setState({oldTotal: newTotal});\n  }\n\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div className=\"cards-container\">\n        <Header onSelectFilterSize={this.onSelectFilterSize} onSelectFilterLight={this.onSelectFilterLight} onPriceLowToHigh={this.onPriceLowToHigh} onPriceHighToLow={this.onPriceHighToLow} onPriceSelect={this.onPriceSelect} priceTitle={this.state.priceTitle} handlePriceTitle={this.handleSortPriceTitle} size={this.state.size} light={this.state.light}/>\n\n        {this.props.list.filter(this.filterItems).length > 0 ? \n          <div>\n            <ProductGrid list={this.props.list.filter(this.filterItems).sort(this.state.sortPrice)} isInCart={false} onSubmit={this.addToCart}onIncrease={this.onIncrease} onDecrease={this.onDecrease}/>\n          </div>\n          :\n          <div>\n            <p>No results match the filters :(</p>\n          </div>\n          }\n      </div>\n      <div className=\"cart-container\">\n          <Cart contents={this.state.cartContents} subtotal={this.state.oldTotal} onSubmit={this.removeFromCart} />\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default Shop;"]},"metadata":{},"sourceType":"module"}